(this.webpackJsonpDMS=this.webpackJsonpDMS||[]).push([[6],{753:function(e,t,r){"use strict";var a=r(757),n=r.n(a),s="http://localhost:3001/api",c=n.a.create({baseURL:s});c.interceptors.request.use((function(e){return o()&&(1===e.url.split("?").length?e.url="".concat(e.url,"?access_token=").concat(o()):e.url="".concat(e.url,"&access_token=").concat(o())),e}),(function(e){console.log(e),Promise.reject(e)})),c.interceptors.response.use((function(e){return e}),(function(e){if(console.log("err"+e),401!==e.response.status)return Promise.reject(e.toJSON());if("/login"!==e.response.config.url){var t=sessionStorage.getItem("refresh_token");if(t)return new Promise((function(r){return i(t).then((function(t){if(console.log("refresh_token Info:",t),200===t.status){sessionStorage.setItem("access_token",t.data.access_token),sessionStorage.setItem("refresh_token",t.data.refresh_token);var a=e.config,n=a.url;return a.url=n.replace(n.split("&").pop(),"access_token="+t.data.access_token),r(c(a))}sessionStorage.clear(),window.location.replace("/login")}))}));sessionStorage.clear(),window.location.replace("/login")}}));var i=function(e){return n()({method:"POST",headers:{Authorization:"Basic "+btoa("my-trusted-client:secret"),"Content-Type":"application/x-www-form-urlencoded"},url:"".concat(s,"/oauth/token?grant_type=refresh_token&refresh_token=").concat(e)})},o=function(){return""};t.a=c},754:function(e,t,r){"use strict"},759:function(e,t,r){},762:function(e,t,r){"use strict";var a=r(12),n=r(20),s=r(2),c=r.n(s),i=r(774),o=r(728),l=(r(748),r(837)),u=r(834),d=r(738),j=r(838),b=r(839),m=r(840),h=r(775),O=r(7),x=r.n(O),p=(r(759),r.p+"static/media/loader-table.f2856051.gif"),g=r(1);function f(e){var t=e.column,r=t.filterValue,a=(t.preFilteredRows,t.setFilter);return Object(g.jsx)(o.a,{type:"text",value:r||"",onChange:function(e){a(e.target.value||void 0)},placeholder:"Search...",style:{fontSize:"10px"}})}function v(e,t,r){return Object(h.a)(e,r,{keys:[function(e){return e.values[t]}]})}v.autoRemove=function(e){return!e};t.a=function(e){var t=e.columns,r=e.data,o=e.loading,h=void 0===o||o,O=Object(s.useState)(!0),A=Object(n.a)(O,2),N=A[0],w=(A[1],c.a.useMemo((function(){return{fuzzyText:v,text:function(e,t,r){return e.filter((function(e){var a=e.values[t];return void 0===a||String(a).toLowerCase().startsWith(String(r).toLowerCase())}))}}}),[])),y=c.a.useMemo((function(){return{Filter:f}}),[]),C=Object(i.useTable)({columns:t,data:r,initialState:{pageIndex:0,pageSize:10},defaultColumn:y,filterTypes:w},i.useFilters,i.useGlobalFilter,i.useSortBy,i.usePagination),S=C.getTableProps,k=C.getTableBodyProps,T=C.headerGroups,E=C.page,P=C.prepareRow,R=C.canPreviousPage,M=C.canNextPage,D=C.pageOptions,F=C.pageCount,B=C.gotoPage,Q=C.nextPage,_=C.previousPage,Y=C.setPageSize,G=(C.setAllFilters,C.state),H=G.pageIndex,I=G.pageSize;return Object(g.jsxs)(g.Fragment,{children:[!1,Object(g.jsxs)(l.a,Object(a.a)(Object(a.a)({},S()),{},{hover:!0,bordered:!0,responsive:!0,children:[Object(g.jsx)("thead",{children:T.map((function(e,t){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("tr",Object(a.a)(Object(a.a)({className:"theader"},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e,t){return Object(g.jsxs)("th",Object(a.a)(Object(a.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(g.jsx)("span",{className:"float-right",children:e.notShowSortingDisplay?"":e.isSorted?e.isSortedDesc?Object(g.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAZUlEQVQ4y2NgGAWjYBSggaqGu5FA/BOIv2PBIPFEUgxjB+IdQPwfC94HxLykus4GiD+hGfQOiB3J8SojEE9EM2wuSJzcsFMG4ttQgx4DsRalkZENxL+AuJQaMcsGxBOAmGvopk8AVz1sLZgg0bsAAAAASUVORK5CYII=",alt:"descending"}):Object(g.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAZ0lEQVQ4y2NgGLKgquEuFxBPAGI2ahhWCsS/gDibUoO0gPgxEP8H4ttArEyuQYxAPBdqEAxPBImTY5gjEL9DM+wTENuQahAvEO9DMwiGdwAxOymGJQLxTyD+jgWDxCMZRsEoGAVoAADeemwtPcZI2wAAAABJRU5ErkJggg==",alt:"ascending"}):Object(g.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAQAAADYWf5HAAAAkElEQVQoz7XQMQ5AQBCF4dWQSJxC5wwax1Cq1e7BAdxD5SL+Tq/QCM1oNiJidwox0355mXnG/DrEtIQ6azioNZQxI0ykPhTQIwhCR+BmBYtlK7kLJYwWCcJA9M4qdrZrd8pPjZWPtOqdRQy320YSV17OatFC4euts6z39GYMKRPCTKY9UnPQ6P+GtMRfGtPnBCiqhAeJPmkqAAAAAElFTkSuQmCC",alt:"sorting"})})]}),t)}))}),t),N?Object(g.jsx)("tr",{style:{backgroundColor:"aliceBlue"},children:e.headers.map((function(e,t){return Object(g.jsx)("th",{className:"tfilter",children:e.canFilter?Object(g.jsxs)(u.a,{className:"mb-1",children:[Object(g.jsxs)(d.a,{className:"divFilter mb-0",children:["Filter ",e.render("Header")," :"]}),e.render("Filter")]}):null},t)}))}):""]})}))}),h?Object(g.jsx)("tbody",{children:Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colSpan:"10000",className:"text-center",children:Object(g.jsx)("img",{src:p,alt:"Loading..."})})})}):Object(g.jsx)(g.Fragment,{children:0===E.length?Object(g.jsx)("tbody",{children:Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colSpan:"10000",className:"text-left",children:"No rows found"})})}):Object(g.jsx)("tbody",Object(a.a)(Object(a.a)({},k()),{},{children:E.map((function(e,t){return P(e),Object(g.jsx)("tr",Object(a.a)(Object(a.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(g.jsx)("td",Object(a.a)(Object(a.a)({},e.getCellProps({className:e.column.className})),{},{children:e.render("Cell")}))}))}),t)}))}))})]})),E.length>0&&Object(g.jsxs)("div",{className:x()("div-pagination",{"d-none":h}),children:[Object(g.jsx)("div",{className:"div-pagination-2",children:Object(g.jsxs)("div",{className:"div-pagination-2-2",children:["Showing"," ",Object(g.jsx)("select",{className:"selectan",value:I,onChange:function(e){Y(Number(e.target.value))},children:[10,20,30,50,100].map((function(e){return Object(g.jsx)("option",{value:e,children:e},e)}))})," ","record per-page"]})}),Object(g.jsxs)("div",{className:"div-pagination-1",children:["Page : ",H+1," from ",D.length," ",Object(g.jsxs)(j.a,{className:"pagina",children:[Object(g.jsx)(b.a,{disabled:!R,children:Object(g.jsx)(m.a,{onClick:function(){return B(0)},children:"<<"})}),Object(g.jsx)(b.a,{disabled:!R,children:Object(g.jsx)(m.a,{onClick:function(){return _()},children:"<"})}),Object(g.jsx)(b.a,{disabled:!M,children:Object(g.jsx)(m.a,{onClick:function(){return Q()},children:">"})}),Object(g.jsx)(b.a,{disabled:!M,children:Object(g.jsx)(m.a,{onClick:function(){return B(F-1)},children:">>"})})]}),Object(g.jsxs)("div",{className:"div-pagination-2-1",children:["Next to Page "," : ",Object(g.jsx)("input",{className:"inputan",type:"number",defaultValue:H+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;B(t)}})]})," "]})]})]})}},763:function(e,t,r){"use strict";var a=r(12),n=r(57),s=(r(2),r(7)),c=r.n(s),i=r(722),o=r(723),l=r(734),u=r(735),d=r(226),j=r.p+"static/media/corner-4.62f4f1af.png",b=function(e){return{__html:e}},m=r(1),h=["title","titleTag","description","image","col","children"],O=function(e){var t=e.title,r=e.titleTag,s=e.description,j=e.image,O=e.col,x=e.children,p=Object(n.a)(e,h);return Object(m.jsxs)(i.a,Object(a.a)(Object(a.a)({},p),{},{children:[Object(m.jsx)(d.a,{image:j,className:"bg-card",style:{borderTopRightRadius:"0.375rem",borderBottomRightRadius:"0.375rem"}}),Object(m.jsx)(o.a,{children:Object(m.jsx)(l.a,{children:Object(m.jsxs)(u.a,Object(a.a)(Object(a.a)({},O),{},{children:[Object(m.jsx)(r,{className:"mb-0",children:t}),s&&Object(m.jsx)("p",{className:c()("mt-2",{"mb-0":!x}),dangerouslySetInnerHTML:b(s)}),x]}))})})]}))};O.defaultProps={col:{lg:8},image:j,titleTag:"h3"};t.a=O},764:function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return d})),r.d(t,"a",(function(){return j})),r.d(t,"e",(function(){return b})),r.d(t,"b",(function(){return m}));var a=r(56),n=r(752),s=r(751),c=r.n(s),i=r(753),o=function(e){return Object(i.a)({method:"get",url:"/Transmittal/".concat(e)})},l=(r(754),function(){var e=Object(n.a)(c.a.mark((function e(t){var r,n,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"REQUEST_PROCESS"}),e.next=4,Object(i.a)({method:"get",url:"/Transmittals"});case 4:if(200!=(r=e.sent).status){e.next=12;break}return n=u(r.data.data[0]||[]),e.next=9,t({type:"FETCH_ALL_DATA",payload:Object(a.a)(n)});case 9:return e.abrupt("return",{error:!1});case 12:return t({type:"FETCH_ERROR",error:r.data.errorMessage}),e.abrupt("return",{error:!0,errorMessage:r.data.errorMessage});case 14:e.next=23;break;case 16:return e.prev=16,e.t0=e.catch(0),s=e.t0,o=s.message,e.next=22,t({type:"FETCH_ERROR",error:o});case 22:return e.abrupt("return",{error:!0,errorMessage:o});case 23:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()),u=function(e){var t=[],r=h(e,"transmittalid");return Object.keys(r).map((function(e){if(r[e].length>0){var a={transmittalid:e,wonNo:r[e][0].wonNo,wonTitle:r[e][0].wonTitle,transmittalNo:r[e][0].transmittalNo,date:r[e][0].date,from:r[e][0].from,to:r[e][0].to,transmittalDetails:r[e].map((function(e,t){return{tdRecId:t+1,transmittalDetailid:e.transmittalDetailid,docNumber:e.docNumber,description:e.description,rev:e.rev,status:e.status,type:e.type}}))};t.push(a)}})),t},d=function(){var e=Object(n.a)(c.a.mark((function e(t,r){var a,n,s,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"REQUEST_PROCESS"}),e.next=4,t({type:"CLEAR_REC"});case 4:return e.next=6,o(r);case 6:if(200!=(a=e.sent).status){e.next=14;break}return n=u(a.data.data[0]||[])||[],e.next=11,t({type:"FETCH_REC",payload:n[0]||{}});case 11:return e.abrupt("return",{error:!1});case 14:return t({type:"FETCH_ERROR",error:s="Something went wrong"}),e.abrupt("return",{error:!0,errorMessage:s});case 17:e.next=26;break;case 19:return e.prev=19,e.t0=e.catch(0),i=e.t0,l=i.message,e.next=25,t({type:"FETCH_ERROR",error:l});case 25:return e.abrupt("return",{error:!0,errorMessage:l});case 26:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,r){return e.apply(this,arguments)}}(),j=function(e){e({type:"CLEAR_REC"})},b=function(){var e=Object(n.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n=t,Object(i.a)({method:"post",url:"/Transmittal",data:n});case 3:if(201!==(r=e.sent).status){e.next=8;break}return e.abrupt("return",{status:r.status,message:r.data.message});case 8:if(200!==r.status){e.next=12;break}return e.abrupt("return",{status:r.status,message:r.data.message});case 12:return e.abrupt("return",{status:r.status,errorMessage:r.data.message,error:r.data.error});case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),a=e.t0,e.abrupt("return",{status:null,errorMessage:a.message,error:a.error});case 19:case"end":return e.stop()}var n}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(n.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n=t,Object(i.a)({method:"delete",url:"/Transmittal/".concat(n)});case 3:if(200!==(r=e.sent).status){e.next=8;break}return e.abrupt("return",{status:r.status,message:r.data.message});case 8:return e.abrupt("return",{status:r.status,errorMessage:r.data.message,error:r.data.error});case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),a=e.t0,e.abrupt("return",{status:null,errorMessage:a.message,error:a.error});case 15:case"end":return e.stop()}var n}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e,t){return e.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(e[r[t]]=e[r[t]]||[]).push(r),e}),{})}},833:function(e,t,r){"use strict";r.r(t);var a=r(752),n=r(20),s=r(751),c=r.n(s),i=r(2),o=r(107),l=r(109),u=r.n(l),d=r(740),j=r(332),b=r(722),m=r(723),h=r(749),O=r(739),x=r(841),p=r(31),g=r(763),f=r(762),v=r(764),A=r(227),N=(r(58),r(754),r(802)),w=r(1),y=function(e){var t=e.data,r=Object(i.useState)(t),a=Object(n.a)(r,2),s=(a[0],a[1]);return Object(i.useEffect)((function(){s(t)}),[t]),Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"row",style:{fontSize:"12px"},children:[Object(w.jsx)("div",{className:"col-md-12",children:Object(w.jsx)(N.Preview,{id:"jsx-template",children:Object(w.jsx)(b.a,{children:Object(w.jsxs)(m.a,{children:[Object(w.jsx)("div",{className:"row",children:Object(w.jsxs)("div",{className:"col-md-12",children:[Object(w.jsxs)("div",{className:"row mt-1",children:[Object(w.jsx)("div",{className:"col-md-2",children:"WON No.: "}),Object(w.jsx)("div",{className:"col-md-10",children:t.wonNo})]}),Object(w.jsxs)("div",{className:"row mt-1",children:[Object(w.jsx)("div",{className:"col-md-2",children:"WON Title: "}),Object(w.jsx)("div",{className:"col-md-10",children:t.wonTitle})]}),Object(w.jsxs)("div",{className:"row mt-1",children:[Object(w.jsx)("div",{className:"col-md-2",children:"Transmittal No.: "}),Object(w.jsx)("div",{className:"col-md-10",children:t.transmittalNo})]}),Object(w.jsxs)("div",{className:"row mt-1",children:[Object(w.jsx)("div",{className:"col-md-2",children:"Date: "}),Object(w.jsx)("div",{className:"col-md-10",children:u()(t.date).format("DD/MM/YYYY")})]}),Object(w.jsxs)("div",{className:"row mt-1",children:[Object(w.jsx)("div",{className:"col-md-2",children:"From: "}),Object(w.jsx)("div",{className:"col-md-10",children:t.from})]}),Object(w.jsxs)("div",{className:"row mt-1",children:[Object(w.jsx)("div",{className:"col-md-2",children:"To: "}),Object(w.jsx)("div",{className:"col-md-10",children:t.to})]})]})}),Object(w.jsx)("div",{className:"row d-flex justify-content-center mt-5",children:Object(w.jsx)("div",{className:"col-md-12",children:Object(w.jsxs)("table",{width:"100%",className:"table table-border",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{style:{width:"10%"},children:"S.No."}),Object(w.jsx)("th",{style:{width:"20%"},children:"Doc Number"}),Object(w.jsx)("th",{style:{width:"40%"},children:"Description"}),Object(w.jsx)("th",{style:{width:"10%"},children:"Rev"}),Object(w.jsx)("th",{style:{width:"10%"},children:"Status"}),Object(w.jsx)("th",{style:{width:"10%"},children:"Type"})]})}),((t||{}).transmittalDetails||[]).map((function(e,t){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:t+1}),Object(w.jsx)("td",{children:e.docNumber}),Object(w.jsx)("td",{children:e.description}),Object(w.jsx)("td",{children:e.rev}),Object(w.jsx)("td",{children:e.status}),Object(w.jsx)("td",{children:e.type})]})}))]})})})]})})})}),Object(w.jsx)("div",{className:"col-md-12 mt-3 text-center",children:Object(w.jsx)(j.a,{outline:!0,size:"sm",onClick:function(){return Object(N.print)("a","jsx-template")},children:"Generate Pdf"})})]})})};t.default=function(e){var t=Object(A.c)(),r=t.loading,s=t.data,l=Object(i.useState)(!1),N=Object(n.a)(l,2),C=N[0],S=N[1],k=Object(i.useState)({}),T=Object(n.a)(k,2),E=T[0],P=T[1],R=Object(A.b)();Object(i.useEffect)((function(){M()}),[]);var M=function(){var e=Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.c)(R);case 2:(t=e.sent).error&&o.c.error(t.errorMessage);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(a.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.b)(t.original.transmittalid);case 2:200==(r=e.sent).status?(o.c.success(r.message),M()):o.c.error(r.errorMessage);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(t.original),S(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=[{Header:"Won No",accessor:"wonNo"},{Header:"Won Title",accessor:"wonTitle"},{Header:"Transmittal No",accessor:"transmittalNo"},{Header:"Date",accessor:"date",Cell:function(e){var t=e.row;return Object(w.jsx)(w.Fragment,{children:u()(t.original.date,"YYYY-MM-DD").format("DD/MM/YYYY")})}},{Header:"From",accessor:"from"},{Header:"To",accessor:"to"},{Header:"Action",id:"action",Cell:function(t){var r=t.row;return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(d.a,{children:[Object(w.jsxs)(j.a,{outline:!0,size:"sm",onClick:function(){return function(t){Object(v.a)(R),e.history.push("/transmittals/record/".concat(t.original.transmittalid))}(r)},children:[Object(w.jsx)(p.a,{icon:"pencil-alt"})," "]}),Object(w.jsx)(j.a,{outline:!0,size:"sm",onClick:function(){return D(r)},children:Object(w.jsx)(p.a,{icon:"trash"})}),Object(w.jsx)(j.a,{outline:!0,size:"sm",onClick:function(){return F(r)},children:Object(w.jsx)(p.a,{icon:"print"})})]})})}}];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(g.a,{title:"Transmittals",className:"mb-2"}),Object(w.jsx)(b.a,{children:Object(w.jsxs)(m.a,{children:[Object(w.jsxs)("div",{className:"row mb-2",children:[Object(w.jsx)("div",{className:"col col-md-4"}),Object(w.jsx)("div",{className:"col col-md-8 text-right",children:Object(w.jsx)("button",{className:"btn btn-falcon-default btn-sm me-1 mb-1",type:"button",onClick:function(){return Object(v.a)(R),void e.history.push("/transmittals/record/".concat(0))},children:"New"})})]}),Object(w.jsx)("div",{className:"row",children:Object(w.jsx)("div",{className:"col-md-12",children:Object(w.jsx)(f.a,{columns:B,loading:r,data:s||[]})})})]})}),Object(w.jsxs)(h.a,{centered:!0,scrollable:!0,isOpen:C,style:{maxWidth:"80vw"},children:[Object(w.jsx)(O.a,{toggle:function(){S(!C),P({})}}),Object(w.jsx)(x.a,{children:Object(w.jsx)(y,{data:E})})]})]})}}}]);
//# sourceMappingURL=6.308a22f0.chunk.js.map